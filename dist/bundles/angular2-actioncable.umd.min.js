!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("@angular/core"),require("@rails/actioncable"),require("rxjs"),require("rxjs/operators")):"function"==typeof define&&define.amd?define("angular2-actioncable",["exports","@angular/core","@rails/actioncable","rxjs","rxjs/operators"],t):t((e=e||self)["angular2-actioncable"]={},e.ng.core,e.ActionCableNs,e.rxjs,e.rxjs.operators)}(this,(function(e,t,n,r,c){"use strict";var o=n,i=function(){function e(e,t){var n=this;this.url=e,this.params=t,this.disconnectedSource=new r.Subject,this.baseCable=o.createConsumer(this.buildUrl(e,t)),t instanceof Function&&this.disconnected().subscribe((function(){n.baseCable.url=o.createWebSocketURL(n.buildUrl(e,t))}))}return e.prototype.channel=function(e,t){var n=this;void 0===t&&(t={});var r=new s(this,e,t);return r.disconnected().subscribe((function(e){return n.disconnectedSource.next(e)})),r},e.prototype.disconnected=function(){return this.disconnectedSource.asObservable().pipe(c.debounceTime(100))},e.prototype.disconnect=function(){this.baseCable.disconnect()},e.prototype.buildUrl=function(e,t){return t instanceof Function&&(t=t()),t?[e,Object.keys(t).map((function(e){return encodeURIComponent(e)+"="+encodeURIComponent(t[e])})).join("&")].join("?"):e},e}(),s=function(){function e(e,t,n){var c=this;void 0===n&&(n={}),this.cable=e,this.name=t,this.params=n,this.initializedSource=new r.Subject,this.connectedSource=new r.Subject,this.disconnectedSource=new r.Subject,this.rejectedSource=new r.Subject,this.eventTypes=["initialized","connected","disconnected","rejected"];var o=Object.assign({},n,{channel:t});this.messages=new r.Observable((function(e){var t={received:function(t){return e.next(t)}};return c.eventTypes.forEach((function(e){t[e]=function(t){return c[e+"Source"].next(t)}})),c.baseChannel=c.cable.baseCable.subscriptions.create(o,t),function(){return c.unsubscribe()}}))}return e.prototype.received=function(){return this.messages},e.prototype.initialized=function(){return this.initializedSource.asObservable()},e.prototype.connected=function(){return this.connectedSource.asObservable()},e.prototype.disconnected=function(){return this.disconnectedSource.asObservable()},e.prototype.rejected=function(){return this.rejectedSource.asObservable()},e.prototype.send=function(e){this.baseChannel.send(e)},e.prototype.perform=function(e,t){this.baseChannel.perform(e,t)},e.prototype.unsubscribe=function(){var e=this;this.baseChannel.unsubscribe(),this.eventTypes.forEach((function(t){return e[t+"Source"].complete()}))},e}(),u=this&&this.__decorate||function(e,t,n,r){var c,o=arguments.length,i=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(c=e[s])&&(i=(o<3?c(i):o>3?c(t,n,i):c(t,n))||i);return o>3&&i&&Object.defineProperty(t,n,i),i},a=function(){function e(){this.cables={}}return e.prototype.cable=function(e,t){return this.cables.hasOwnProperty(e)||(this.cables[e]=new i(e,t)),this.cables[e]},e.prototype.disconnect=function(e){this.cables.hasOwnProperty(e)&&(this.cables[e].disconnect(),delete this.cables[e])},e=u([t.Injectable()],e)}();e.ActionCableService=a,e.Cable=i,e.Channel=s,Object.defineProperty(e,"__esModule",{value:!0})}));
//# sourceMappingURL=angular2-actioncable.umd.min.js.map